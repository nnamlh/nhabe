@model MattanaSite.Models.MProduct
@{
    ViewBag.Title = "Sản phẩm";
    var ptype = ViewBag.PType as IEnumerable<MattanaSite.Models.ProductType>;

}


<div class="portlet portlet-boxed">
    <div class="portlet-header">
        <h4 class="portlet-title">
            Chỉnh sửa sản phẩm
        </h4>
    </div> <!-- /.portlet-header -->

    <div class="portlet-body">
        <div class="row">
            <p class="">@ViewBag.MSG</p>
            <form method="post" onsubmit="if(!confirm('Chỉnh sửa sản phẩm ?')){return false;}">

                <input type="hidden" name="Id" value="@Model.Id" />
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Mã code</label>
                        <input type="text" value="@Model.PCode" name="PCode" class="form-control" required />
                    </div>
                    <div class="form-group">
                        <label>Mã hàng</label>
                        <input type="text" value="@Model.PMainCode" name="PMainCode" class="form-control" required />
                    </div>
                    <div class="form-group">
                        <label>Tên sản phẩm</label>
                        <input type="text" value="@Model.PName" name="PName" class="form-control" required />
                    </div>

                </div>

                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Giá / cái</label>
                        <input type="number" value="@Model.Price" name="Price" class="form-control" required />
                    </div>
                    <div class="form-group">
                        <label>Cở vóc</label>
                        <input type="text" value="@Model.PSize" name="PSize" class="form-control" required />
                    </div>

                    <div class="form-group">
                        <label>Phân loại sản phẩm</label>
                        <select class="form-control" name="TypeId">
                            @foreach (var item in ptype)
                            {
                                if (Model.TypeId == item.Id)
                                {
                                    <option value="@item.Id" selected>@item.Name</option>
                                }
                                else
                                {
                                    <option value="@item.Id">@item.Name</option>
                                }
                            }
                        </select>
                    </div>


                </div>
                <div class="col-sm-12">
                    <button type="submit" class="btn btn-primary">Chỉnh sửa</button>
                </div>
            </form>
        </div>
    </div>
</div> 


@section scripts {

    <script>

        $("input[name*='Price']").on('input', function (e) {
            var price = $("input[name*='Price']").val();

            if (price < 0 || price === '') {
                $("input[name*='Price']").val(0);
            }
        });

    </script>
}